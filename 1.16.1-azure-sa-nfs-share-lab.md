
# ðŸ”¹ Lab Exercise: Create Storage Account, NFS File Share, VNet, VM & Mount

---

## **Step 1: Create a Resource Group**

1. Go to **Azure Portal** â†’ **Resource groups** â†’ **Create**.
2. Resource Group Name: `studentname-rg`
3. Region: Select your preferred region.
4. Click **Review + Create** â†’ **Create**.

---

## **Step 2: Create Virtual Network and Subnet**

1. Go to **Virtual networks** â†’ **Create**.
2. Name: `studentname-vnet`
3. Region: Same as RG.
4. Add subnet:

   * Subnet name: `studentname-subnet`
   * CIDR: `10.0.0.0/24` (example)
5. Review + Create.

---

## **Step 3: Create Storage Account**

1. Go to **Storage accounts** â†’ **Create**.
2. Resource Group: `studentname-rg`
3. Storage Account Name: `studentnamestorage`
4. Region: Same as VNet.
5. Performance: **Premium** (needed for NFS).
6. Redundancy: LRS.
7. **Networking Tab**:

   * Select **Private Endpoint** or **Selected networks**.
   * Choose `studentname-vnet` and `studentname-subnet`.
8. Review + Create.

---

## **Step 4: Enable NFS File Share**

1. Open your **Storage Account** â†’ **Data storage** â†’ **File shares**.
2. Click **+ File Share**.
3. Name: `studentname-nfs`
4. Protocol: **NFS**
5. Quota: Set (e.g., 100 GiB).
6. Create.

---

## **Step 5: Create Linux Virtual Machine**

1. Go to **Virtual machines** â†’ **Create**.
2. Resource Group: `studentname-rg`
3. VM Name: `studentname-vm`
4. Region: Same as storage.
5. Image: **Ubuntu 22.04 LTS** (or RHEL/CentOS if required).
6. Size: Standard B2s.
7. Authentication: SSH key or Password.
8. Networking:

   * VNet: `studentname-vnet`
   * Subnet: `studentname-subnet`
9. Review + Create.

---

## **Step 6: Mount NFS File Share in VM**

1. SSH into VM:

   ```bash
   ssh azureuser@<public-ip>
   ```
2. Install NFS client:

   * For Ubuntu:

     ```bash
     sudo apt update && sudo apt install -y nfs-common
     ```
   * For RHEL/CentOS:

     ```bash
     sudo yum install -y nfs-utils
     ```
3. Create mount directory:

   ```bash
   sudo mkdir -p /mnt/studentname-nfs
   ```
4. Get NFS mount path:

   * Go to **Storage Account â†’ File Share â†’ Connect**.
   * Copy NFS mount command (looks like below):

   ```bash
   sudo mount -t nfs <storageaccount>.file.core.windows.net:/<storageaccount>/<sharename> /mnt/studentname-nfs -o vers=4,minorversion=1,sec=sys
   ```

   Example:

   ```bash
   sudo mount -t nfs studentnamestorage.file.core.windows.net:/studentnamestorage/studentname-nfs /mnt/studentname-nfs -o vers=4,minorversion=1,sec=sys
   ```

---

## **Step 7: Make Mount Permanent**

1. Edit `/etc/fstab`:

   ```bash
   sudo nano /etc/fstab
   ```
2. Add entry:

   ```
   studentnamestorage.file.core.windows.net:/studentnamestorage/studentname-nfs /mnt/studentname-nfs nfs vers=4,minorversion=1,sec=sys 0 0
   ```
3. Save & exit.
4. Test:

   ```bash
   sudo mount -a
   ```

---

## **Step 8: Create Files in NFS Mount**

1. Inside VM:

   ```bash
   cd /mnt/studentname-nfs
   echo "Hello from studentname" > testfile.txt
   ls -l
   ```

2. File will be stored in NFS and accessible to any VM in the same VNet/Subnet.

---

âœ… Now you have:

* Resource Group `studentname-rg`
* VNet `studentname-vnet` with Subnet `studentname-subnet`
* Storage Account `studentnamestorage` with NFS Share `studentname-nfs`
* Linux VM `studentname-vm` with mounted & permanent NFS

---
