

## ðŸ”¹ Lab Exercise â€“ Azure Storage Account & Blob Management

### 1. Create a Storage Account

1. Go to **Azure Portal** â†’ Search **Storage accounts** â†’ Click **Create**.
2. Fill details:

   * **Subscription** â†’ Your free/paid subscription
   * **Resource Group** â†’ Create new `RG-StorageLab`
   * **Storage Account Name** â†’ `storagelab<yourinitials>`
   * **Region** â†’ Select nearest region
   * **Performance** â†’ Standard
   * **Redundancy** â†’ LRS (Locally Redundant Storage)
3. Click **Review + Create** â†’ **Create**.

---

### 2. Create a Blob Container

1. Open your new **Storage Account** â†’ **Containers** â†’ **+ Container**.
2. Name: `labcontainer`.
3. Public access level â†’ **Private (no anonymous access)** (for now).
4. Click **Create**.

---

### 3. Upload Files

1. Go to **Containers â†’ labcontainer** â†’ **Upload**.
2. Select a test file (`sample.txt`).
3. Click **Upload**.

---

### 4. Download Files

1. Select the uploaded `sample.txt`.
2. Click **Download** â†’ File will be saved locally.

---

### 5. Access Files using URL

1. Click on the uploaded file â†’ Youâ€™ll see **Blob URL**.
   Example: `https://storagelab.blob.core.windows.net/labcontainer/sample.txt`
2. If **container is private**, clicking the link gives **Access Denied**.
3. Change **Access level**:

   * Go to `labcontainer` â†’ **Change access level** â†’ **Blob (anonymous read access)**.
   * Now open the URL â†’ file will be visible.

---

### 6. Enable Blob Versioning & Test

1. In Storage Account â†’ **Data Management â†’ Data Protection**.
2. Enable **Blob Versioning**.
3. Upload a new version of `sample.txt` (overwrite with updated content).
4. Go to file â†’ **Versions** tab â†’ You can see old & new versions.

   * Download old version to verify rollback.
   * Delete the blob â†’ Still recoverable via **Undelete** if enabled.

---

### 7. Change Access Tier (Hot, Cool, Archive)

1. Select your file â†’ **Change tier**.

   * **Hot** â†’ Frequently accessed data (higher cost).
   * **Cool** â†’ Infrequently accessed (lower cost).
   * **Archive** â†’ Rarely accessed (very cheap, retrieval takes hours).
2. Change between tiers and observe status in file properties.

---

### 8. Deny & Allow Access

**Option 1: Container Level Access**

* Set **Access Level** back to **Private** â†’ File URL wonâ€™t work anymore.

**Option 2: Shared Access Signature (SAS)**

1. Go to file â†’ **Generate SAS**.
2. Select expiry time (say 1 hour).
3. Copy the SAS URL â†’ Works until expiry. After expiry â†’ **Access Denied**.

**Option 3: IAM Role**

1. Go to Storage Account â†’ **Access Control (IAM)**.
2. Remove yourself from `Storage Blob Data Reader` role â†’ You lose access.
3. Add back role â†’ Access restored.

---

## ðŸ”¹ Lab Summary Checklist

* [x] Created Storage Account
* [x] Created Container
* [x] Uploaded & Downloaded file
* [x] Accessed file via URL (allowed/denied)
* [x] Checked Blob Versioning (add/remove)
* [x] Changed Access Tier (Hot/Cool/Archive)
* [x] Tested Access Control (Private/Public, SAS, IAM)

---
